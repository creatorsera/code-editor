<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Offline Code Editor</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.41.0/min/vs/loader.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
    <style>
        body { display: flex; height: 100vh; margin: 0; overflow: hidden; background: #1e1e1e; color: white; font-family: Arial, sans-serif; }
        .container { display: flex; width: 100%; height: 100vh; }
        #editor-container { display: flex; flex-direction: column; width: 50%; height: 100vh; border-right: 2px solid #333; border-radius: 10px; }
        #editor { flex-grow: 1; border-radius: 10px; }
        #preview-container { width: 50%; height: 100vh; display: flex; flex-direction: column; border-radius: 10px; }
        #preview { flex-grow: 1; border: none; background: white; border-radius: 10px; }
        .toolbar { display: flex; justify-content: space-between; padding: 10px; background: #2d2d2d; border-radius: 10px; cursor: move; }
        button { background: #007acc; color: white; border: none; padding: 5px 10px; cursor: pointer; border-radius: 5px; }
        button:hover { background: #005f9e; }
        .resizer { width: 5px; cursor: ew-resize; background: #444; }
        .status-bar { padding: 5px; font-size: 12px; background: #2d2d2d; color: white; text-align: right; border-radius: 10px; }
<meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Offline Code Editor</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.41.0/min/vs/loader.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <div id="sidebar">
            <button onclick="newFile('html')">New HTML</button>
            <button onclick="newFile('css')">New CSS</button>
            <button onclick="newFile('js')">New JS</button>
            <ul id="file-list"></ul>
        </div>
        <div id="editor-container">
            <div class="toolbar" id="toolbar">
                <button onclick="formatCode()">Format</button>
                <button onclick="downloadCode()">Download</button>
            </div>
            <div id="editor"></div>
            <div class="status-bar" id="status-bar">Ln 1, Col 1</div>
        </div>
        <div class="resizer" id="resizer"></div>
        <div id="preview-container">
            <iframe id="preview"></iframe>
            <div id="console-panel"></div>
        </div>
    </div>
    
    <script src="script.js"></script>
    </style>
</head>
<body>
    <div class="container">
        <div id="editor-container">
            <div class="toolbar" id="toolbar">
                <button onclick="downloadCode()">Download</button>
            </div>
            <div id="editor"></div>
            <div class="status-bar" id="status-bar">Ln 1, Col 1</div>
        </div>
        <div class="resizer" id="resizer"></div>
        <div id="preview-container">
            <iframe id="preview"></iframe>
        </div>
    </div>
    
    <script>
        require.config({ paths: { 'vs': 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.41.0/min/vs' } });
        require(["vs/editor/editor.main"], function () {
            const editor = monaco.editor.create(document.getElementById('editor'), {
                value: localStorage.getItem('code') || `<!DOCTYPE html>\n<html>\n<head>\n<title>Live Preview</title>\n<style>\nbody { font-family: Arial; }\n</style>\n</head>\n<body>\n<h1>Hello, World!</h1>\n<script>console.log('JS Working');<\/script>\n</body>\n</html>`,
                language: "html",
                theme: "vs-dark",
                automaticLayout: true
            });
            
            function updatePreview() {
                const code = editor.getValue();
                localStorage.setItem('code', code);
                document.getElementById('preview').srcdoc = code;
            }
            
            function downloadCode() {
                const code = editor.getValue();
                const blob = new Blob([code], { type: 'text/html' });
                const link = document.createElement('a');
                link.href = URL.createObjectURL(blob);
                link.download = 'code.html';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            }
            
            function updateStatusBar() {
                const position = editor.getPosition();
                document.getElementById('status-bar').textContent = `Ln ${position.lineNumber}, Col ${position.column}`;
            }
            
            editor.onDidChangeModelContent(updatePreview);
            editor.onDidChangeCursorPosition(updateStatusBar);
            updatePreview();
            updateStatusBar();
        });
        
        const resizer = document.getElementById("resizer");
        const editorContainer = document.getElementById("editor-container");
        const previewContainer = document.getElementById("preview-container");
        let isResizing = false;
        
        resizer.addEventListener("mousedown", (event) => {
            isResizing = true;
            document.addEventListener("mousemove", resizeEditor);
            document.addEventListener("mouseup", () => { isResizing = false; document.removeEventListener("mousemove", resizeEditor); });
        });
        
        function resizeEditor(event) {
            if (isResizing) {
                const newEditorWidth = event.clientX / window.innerWidth * 100;
                editorContainer.style.width = `${newEditorWidth}%`;
                previewContainer.style.width = `${100 - newEditorWidth}%`;
            }
        }
        
        // Make toolbar draggable
        const toolbar = document.getElementById("toolbar");
        let isDragging = false, offsetX, offsetY;
        
        toolbar.addEventListener("mousedown", (event) => {
            isDragging = true;
            offsetX = event.clientX - toolbar.offsetLeft;
            offsetY = event.clientY - toolbar.offsetTop;
            document.addEventListener("mousemove", dragToolbar);
            document.addEventListener("mouseup", () => { isDragging = false; document.removeEventListener("mousemove", dragToolbar); });
        });
        
        function dragToolbar(event) {
            if (isDragging) {
                toolbar.style.position = "absolute";
                toolbar.style.left = `${event.clientX - offsetX}px`;
                toolbar.style.top = `${event.clientY - offsetY}px`;
            }
        }
    </script>
</body>
</html>
